// *** Enums ***

Enum Stream {
  DISTRIBUTION
  MANUFACTURING
  CSLOG_PLATFORM
  GROUP_PLATFORM
  OFFICE
  MA
  OTHER
}

Enum Scope {
  MARKETS
  REGIONS
  MAISONS
  GROUP
}

Enum Responsibility {
  REQUESTER
  REVIEWER
  APPROVER
}

Enum BudgetProject {
  YES
  NO
  PARTIALLY
}

Enum Status {
  IN_PROGRESS
  SUBMITTED
  PRENDING_REVIEW
  FAVORABLE
  FAVORABLE_WITH_CONDITIONS
  CHANGES_REQUESTED
  UNFAVORABLE
  APPROVED
  APPROVED_WITH_CONDITIONS
  REJECTED
  CANCELED
  ROLE_CHANGED
}

// *** Master data tables ***
// Those value can be updated super user only


Table Maison {
  Code varchar [note: "Ex : CAR"]
  Name varchar [note: "Ex : Cartier"]
  Picture blob
}

Table CarStream {
  Id varchar(2) [note: "Ex : 7"]
  Name varchar(20) [note: "Ex : INTERNAL BOUTIQUE"]
}

Table CarType {
  Code varchar(3) [note: "Ex : NEW"]
  Text varchar(20) [note: "Ex : Opening Perm."]
}

Table BoutiqueEnvironment {
  Code varchar(4) [note: "Ex : RI02"]
  Text varchar(20) [note: "Ex : Interior Boutique"] 
}

Table BoutiqueType {
  Code varchar(4) [note: "Ex : RI02"]
  Text varchar(20) [note: "Ex : Interior Boutique"] 
}

// Can be updated by Excel upload
Table Entity {
  Code varchar(4) [note: "Ex : Z108"]
  LocalCurrrency varchar(5) [note: "Ex : EUR"]
  Name varchar(20) [note: "Ex : Richemont France"]
}

Table RoleMatrix {
  Stream Stream
  Scope Scope
  Responsibility Responsibility
  Order int [note : "Defines the order of approval in a given scope and responsibility"]
  Role varchar(200) [not null, note : "Ex : Chairman" ]
}

Table StreamScreen {
  CarStream CarStream [ref: > CarStream.Id]
  CarType CarType [ref: > CarType.Code]
  ScreenName varchar [note : "Screen number from 1 to 9"]
}

// *** App tables ***

// Mendix default user table contains firstname/lastname/email etc
// Specialisation table for user
Table User {
  Id varchar [pk, not null]
  JobTitle varchar
  Scope Scope [not null]
  Maison varchar [ref: > Maison.Code]
  Region varchar 
  Market varchar
  picture blob
}

Table RequestRole {
  Id varchar [pk]
  UserId varchar [ref: > User.Id]
  RequestId varchar [ref: > Request.SEMNumber]
  Scope Scope
  Responsibility Responsibility
  Role varchar(200) [not null, note : "Ex : Chairman" ]
  IsPendingAction boolean
  CreatedOn datetime
  CreatedBy varchar [ref: > User.Id]
  UpdatedOn datetime
  UpdatedBy varchar [ref: > User.Id]
}

Table Request {
  Requester varchar [ref: > User.Id, not null]
  SEMNumber varchar [pk] 
  CarStream CarStream [not null]
  CarType CarType [not null]
  Currency varchar [ not null]
  Status Status [not null]
  CreatedOn datetime [not null]
  CreatedBy varchar [ref: > User.Id, not null]
  UpdatedOn datetime
  UpdatedBy varchar [ref: > User.Id]
}

Table RequestVersion {
  Id varchar [pk]
  SEMNumber varchar [ref: > Request.SEMNumber]
  Scope Scope [not null]
  CreatedOn datetime
  CreatedBy varchar [ref: > User.Id]
  UpdatedOn datetime
  UpdatedBy varchar [ref: > User.Id]
}

Table Attachments {
  Id varchar [pk]
  FileName varchar
  Binary blob
  RequestVersionId varchar [ref: > RequestVersion.Id]
  CreatedOn datetime
  CreatedBy varchar
  UpdatedOn datetime
  UpdatedBy varchar
}

Table RequestInformation {
  Id varchar [pk]
  RequestVersionId varchar [ref: - RequestVersion.Id]
  FxRate decimal [not null]
  Maison Maison [not null]
  Stream varchar [note: "Ex : Manufacturing"]
  RequestType varchar [note: "Ex : Relocation without lease renewal"]
  RequestName varchar [note: "Ex : Hyundai main"]
  StreetName varchar [note: "Ex : 123 Main St"]
  BoutiqueType varchar [note: "Ex : Flagship"]
  BoutiqueEnvironment varchar [note: "Ex : Street Boutique"]
  Location varchar [note: "Ex : Seoul"]
  Country varchar [note: "Ex : France"]
  ReportingEntity varchar [note: "Ex : 59 - Richmt Korea"]
  CompletionDate datetime [note: "Format: dd.mm.yyyy"]
  BudgetProject BudgetProject [not null]
  BudgetProjectDetails text []
  TranferToAnotherMaison boolean //only for screen 4
  TranferToAnotherMaisonDetails text [] //only for screen 4
  PartnersName varchar(10000) [note: "Ex : ABC Real Estate"] //only for screen 5
  ContractDuration varchar(10000) [note: "Ex : 10 years"] //only for screen 5
  ReviewByLegal boolean //only for screen 8
  ReviewByProcurement boolean //only for screen 8
}

// for screen 1, 2 and 3, 5
Table FinancialCommitmentComposition {
  Id varchar [pk]
  RequestVersionId varchar [ref: - RequestVersion.Id]
  TotalCapex decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 5, 6, 7, 8, 9
  LandLordContribution decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 5
  MaisonCapex decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 5
  KeyMoney decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 3
  LeaseDeposit decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 3, 6, 9
  InternationalisationCost decimal [note: "Ex : 2536.99"] // only for screen 1, 2
  Inventories decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 5
  FixedLeaseCommitment decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 3, 6, 9
  TemporaryBoutique decimal [note: "Ex : 2536.99"] // only for screen 1, 2
  OtherCommitments decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 5, 7, 8, 9
  TotalInvestedCapital decimal [note: "Ex : 2536.99"] // only for screen 1, 2, 3, 5
  OneOffCosts decimal [note: "Ex : 2536.99"] // only for screen 6, 7
  OpexCommitments decimal [note: "Ex : 2536.99"] // only for screen 6, 8, 9
  TotalFinancialCommitment decimal [note: "Ex : 2536.99"] // only for screen 6, 7, 9
}

Table Activity {
  Id varchar [pk]
  Type varchar
  Status Status
  HasConditions boolean
  Conditions text
  Comments text
  RequestId varchar [ref: > Request.SEMNumber]
  CreatedDate datetime
  CreatedBy varchar [ref: > User.Id]
}